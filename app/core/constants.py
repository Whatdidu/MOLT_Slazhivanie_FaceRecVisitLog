"""
Константы приложения Sputnik Face ID.
"""

# ===========================================
# Пути
# ===========================================
DEBUG_PHOTOS_DIR = "debug_photos"
TEMPLATES_DIR = "templates"

# ===========================================
# Валидация изображений
# ===========================================
ALLOWED_IMAGE_TYPES = {"image/jpeg", "image/png", "image/webp"}
MAX_IMAGE_SIZE_MB = 10
MAX_IMAGE_SIZE_BYTES = MAX_IMAGE_SIZE_MB * 1024 * 1024
MIN_IMAGE_WIDTH = 100
MIN_IMAGE_HEIGHT = 100

# ===========================================
# Распознавание лиц (пороги)
# ===========================================
# Статус "match" - лицо распознано с высокой уверенностью
RECOGNITION_MATCH_THRESHOLD = 0.55

# Статус "low_confidence" - распознано, но с низкой уверенностью
RECOGNITION_LOW_CONFIDENCE_THRESHOLD = 0.40

# Ниже этого порога - статус "unknown"

# ===========================================
# Статусы распознавания
# ===========================================
class RecognitionStatus:
    MATCH = "match"                    # >= 0.55 - распознано
    LOW_CONFIDENCE = "low_confidence"  # 0.40-0.55 - низкая уверенность
    UNKNOWN = "unknown"                # < 0.40 - не найдено в базе
    NO_FACE = "no_face"                # Лицо не обнаружено на изображении
    ERROR = "error"                    # Ошибка обработки

# ===========================================
# Журнал посещений
# ===========================================
# Минимальный интервал между записями для одного человека (секунды)
# Защита от "спама" записей при частых проходах
ATTENDANCE_MIN_INTERVAL_SECONDS = 60

# ===========================================
# TTL (Time To Live)
# ===========================================
# Время хранения отладочных фото (дни)
DEBUG_PHOTOS_TTL_DAYS = 7

# ===========================================
# API
# ===========================================
API_V1_PREFIX = "/api/v1"

# ===========================================
# Заголовки HTTP
# ===========================================
TRACE_ID_HEADER = "X-Trace-ID"
PROCESS_TIME_HEADER = "X-Process-Time"
